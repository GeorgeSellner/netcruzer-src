<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Netcruzer Library API: netcruzer/lib/nz_debounce.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Netcruzer Library API
   &#160;<span id="projectnumber">V2.03</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nz__debounce_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">nz_debounce.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains code for debouncing noisy ditital inputs, like buttons.  
<a href="#details">More...</a></p>

<p><a href="nz__debounce_8h_source.html">Go to the source code of this file.</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains code for debouncing noisy ditital inputs, like buttons. </p>
<dl class="section author"><dt>Author</dt><dd><a href="www.modtronix.com">Modtronix Engineering</a> </dd></dl>
<dl class="section user"><dt>Compiler:</dt><dd>MPLAB XC16 Compiler</dd></dl>
<h1><a class="anchor" id="nz_debounce_desc"></a>
Description</h1>
<p>Functions for debouncing noisy digital inputs, like buttons for example. See <a class="el" href="nz__debounce_8h.html#nz_debounce_usage">Usage</a> for details how to use it. This module is automatically enabled in the system as soon as any DEBOUNCE_GET_PORTn defines are added to the projdefs.h file (as described in "Usage" section).</p>
<h2><a class="anchor" id="nz_debounce_conf"></a>
Configuration</h2>
<p>The following defines are used to configure this module, and should be placed in projdefs.h. Note that all items marked [-DEFAULT-] are defaults, and do not have to be placed in projdefs.h if they contain desired configuration! For details, see <a class="el" href="group__info__conf__proj.html">Project Configuration</a>. </p>
<div class="fragment"><div class="line"><span class="comment">// *********************************************************************</span></div>
<div class="line"><span class="comment">// ------------ Debounce Configuration (from nz_debounce.h) -------------</span></div>
<div class="line"><span class="comment">// *********************************************************************</span></div>
<div class="line"><span class="comment">//Define functions for reading each port&#39;s value. ALWAYS define from 1 and up, with NO gaps!</span></div>
<div class="line"><span class="comment">//For example, if using 3 ports, use first 3 (1,2 and 3), AND NOT 1,2 and 4!</span></div>
<div class="line"><span class="preprocessor">#define DEBOUNCE_GET_PORT1()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define DEBOUNCE_GET_PORT2()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define DEBOUNCE_GET_PORT3()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define DEBOUNCE_GET_PORT4()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define DEBOUNCE_GET_PORT5()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define DEBOUNCE_GET_PORT6()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define DEBOUNCE_GET_PORT7()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define DEBOUNCE_GET_PORT8()</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">//Define debounce times. Must be multiples of 20ms</span></div>
<div class="line"><span class="preprocessor">#define DEBOUNCE_RST            ( 40 )      //40ms debounce [-DEFAULT-]</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define DEBOUNCE_REPEAT         ( 280 )     //280ms first repeat [-DEFAULT-]</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define DEBOUNCE_REPEAT_TIMES   ( 2 )       //2 times = 2 x 280ms = 560ms [-DEFAULT-]</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define DEBOUNCE_REPEAT2        ( 160 )     //100ms following repeats [-DEFAULT-]</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define DEBOUNCE_REPEAT2_TIMES  ( 10 )      //10 times = 10 x 160ms = 1.6 Second [-DEFAULT-]</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define DEBOUNCE_REPEAT3        ( 80 )      //80ms [-DEFAULT-]</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define DEBOUNCE_REPEAT3_TIMES  ( 20 )      //20 times = 20 x 80ms = 1.6 Seconds [-DEFAULT-]</span></div>
<div class="line"><span class="preprocessor">#define DEBOUNCE_REPEAT4        ( 40 )      //60ms [-DEFAULT-]</span></div>
</div><!-- fragment --><h2><a class="anchor" id="nz_debounce_usage"></a>
Usage</h2>
<p>To use this module, the following must be done:</p>
<ul>
<li>Copy the <a class="el" href="nz__debounce_8h.html#nz_debounce_conf">Configuration</a> section above (from <a class="el" href="nz__debounce_8h.html" title="Contains code for debouncing noisy ditital inputs, like buttons. ">nz_debounce.h</a>) to the projdefs.h file.</li>
<li>In this "Configuration" section, change any default values if required (if default values should be used, define is not required in projdefs.h).</li>
<li>Complete the DEBOUNCE_GET_PORTn defines for all ports that should be debounced.</li>
<li>Add nz_debounce.c to the MPLAB project.</li>
<li>Include <a class="el" href="nz__debounce_8h.html" title="Contains code for debouncing noisy ditital inputs, like buttons. ">nz_debounce.h</a> in the c file it is used in.</li>
<li><b>All DONE!</b> The functions defined in this file can now be used in the project.</li>
</ul>
<h2><a class="anchor" id="nz_debounce_examples"></a>
Examples</h2>
<p>An example how to use this module to debounce buttons connected to ports 4 and 7 (old port names X4 and X7). First, the following must be added to the projdefs.h file: </p>
<div class="fragment"><div class="line"><span class="preprocessor">#define DEBOUNCE_GET_PORT1()    PIN_04</span></div>
<div class="line"><span class="preprocessor">#define DEBOUNCE_GET_PORT2()    PIN_07</span></div>
</div><!-- fragment --><p> After doing this, this module will automatically be enabled in the system (debounceService() is called every 20ms). We can now use the debounceGetLatchedPort() function to get the debounced port values. For example: </p>
<div class="fragment"><div class="line">DIR_04 = <a class="code" href="nz__board_8h.html#a1a806e0533aa476bb6e62b7d22c93572" title="Macros for input and output pins. ">INPUT_PIN</a>; <span class="comment">//Configure port 4 (old port name X4) as an input</span></div>
<div class="line">PULLDOWN_04 = TRUE;  <span class="comment">//Enable pull-down resistor on port 4 (old port name X4)</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//Get debounced port 1</span></div>
<div class="line"><span class="keywordflow">if</span>(debounceGetLatchedPort(1)) {</div>
<div class="line">    <span class="comment">//... Do something</span></div>
<div class="line">}</div>
</div><!-- fragment --><p> If a button is attached to pin 4 (old port name X4), it should be tied to 3.3V via a resistor(10k for example). And, the internal pull-down resistor of port 4 (X4) should be enabled.</p>
<h1><a class="anchor" id="nz_debounce_lic"></a>
Software License Agreement</h1>
<p>The software supplied herewith is owned by Modtronix Engineering, and is protected under applicable copyright laws. The software supplied herewith is intended and supplied to you, the Company customer, for use solely and exclusively on products manufactured by Modtronix Engineering. The code may be modified and can be used free of charge for commercial and non commercial applications. All rights are reserved. Any use in violation of the foregoing restrictions may subject the user to criminal sanctions under applicable laws, as well as to civil liability for the breach of the terms and conditions of this license.</p>
<p>THIS SOFTWARE IS PROVIDED IN AN 'AS IS' CONDITION. NO WARRANTIES, WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT, IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.</p>
<p>File History</p>
<p>2013-10-28, David H. (DH):</p>
<ul>
<li>Initial version </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_0497715779ca99cb1134d5ce544966ba.html">netcruzer</a></li><li class="navelem"><a class="el" href="dir_285a68def6f82363136d1caaa0fe0051.html">lib</a></li><li class="navelem"><a class="el" href="nz__debounce_8h.html">nz_debounce.h</a></li>
    <li class="footer">Generated on Tue Dec 9 2014 15:08:19 for Netcruzer Library API by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
