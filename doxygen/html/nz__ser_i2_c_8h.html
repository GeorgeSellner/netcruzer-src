<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Netcruzer Library API: netcruzer/lib/nz_serI2C.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Netcruzer Library API
   &#160;<span id="projectnumber">V2.03</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nz__ser_i2_c_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">nz_serI2C.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>I2C Port 1 functions.  
<a href="#details">More...</a></p>

<p><a href="nz__ser_i2_c_8h_source.html">Go to the source code of this file.</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>I2C Port 1 functions. </p>
<dl class="section author"><dt>Author</dt><dd><a href="www.modtronix.com">Modtronix Engineering</a> </dd></dl>
<dl class="section user"><dt>Compiler:</dt><dd>MPLAB XC16</dd></dl>
<h1><a class="anchor" id="nz_seri2c_desc"></a>
Description</h1>
<p>Functions for communicating with I2C Ports. It is interrupt based, and all processing is handled in the background by interrupt service routines. Internally <a class="el" href="nz__circular_buffer_8h.html#nz_circularBuffer_desc">Circular Buffers</a> are used, allowing multiple messages to be written to the queue.</p>
<ul>
<li><a class="el" href="group__nz__seri2c__intro.html#nz_seri2c_details">Dedicated I2C functions</a> can be used for communicating with I2C ports.</li>
<li>Alternatively messages can be directly written to, and read from the underlying <a class="el" href="group__nz__seri2c__intro.html#nz_seri2c_cirbuf">Circular Buffer</a>.</li>
<li><a class="el" href="group__nz__seri2c__intro.html#nz_seri2c_ascii">ASCII Commands</a> are also supported if human readable, ASCIII commands are required.</li>
</ul>
<h2><a class="anchor" id="nz_seri2c_conf"></a>
Configuration</h2>
<p>The following defines are used to configure this module, and should be placed in projdefs.h. Note that all items marked [-DEFAULT-] are defaults, and do not have to be placed in projdefs.h if they contain desired configuration! For details, see <a class="el" href="group__info__conf__proj.html">Project Configuration</a>. </p>
<div class="fragment"><div class="line"><span class="comment">// *********************************************************************</span></div>
<div class="line"><span class="comment">// --------------- I2C Configuration (from nz_serI2C.h) ----------------</span></div>
<div class="line"><span class="comment">// *********************************************************************</span></div>
<div class="line"><span class="comment">//To save space, this will remove all code to do with Listeners</span></div>
<div class="line"><span class="comment">//#define I2C_DONT_SUPPORT_LISTENERS</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//Number of listeners that can be registered for all I2C ports, a value from 1 to 7.</span></div>
<div class="line"><span class="preprocessor">#define    I2C_LISTENERS 4          //[-DEFAULT-]</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">//---- Enable I2C1 as a &quot;Serial Data Port&quot; ----</span></div>
<div class="line"><span class="preprocessor">#define NZ_I2C1_ENABLE</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">//I2C1 Interrupt priority, a value from 0 to 7. 0 will disable interrupt, 7 is highest priority.</span></div>
<div class="line"><span class="preprocessor">#define    nzINT_PRIORITY_I2C1 3      //[-DEFAULT-]</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">//Transmit and Receive buffer sizes, for compatibility, ensure it is a power of 2 value! This can be bypassed</span></div>
<div class="line"><span class="comment">//by using a &quot;non power of 2&quot; CircularBuffer implementation for this project. See nz_CircularBuffer.h for details.</span></div>
<div class="line"><span class="preprocessor">#define    I2C1_RXBUF_SIZE  64      //[-DEFAULT-]</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define    I2C1_TXBUF_SIZE  256     //[-DEFAULT-]</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">//I2C1 speed, can be 10K, 20K, 50K, 100K, 400K or 1M. Can also use value, for example 78 will give 200kHz.</span></div>
<div class="line"><span class="comment">//IMPORTANT to limit it to speed of lowest device on bus! For example, is 400kHz for RTC on SBC66EC!</span></div>
<div class="line"><span class="preprocessor">#define    I2C1_BAUD I2C_BAUD_100K  //[-DEFAULT-]</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">//Uncomment this to define your own I2C 1 TX and RX &quot;Circular Buffers&quot;</span></div>
<div class="line"><span class="comment">//#define I2C1_DONT_CREATE_CIRBUF</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//I2C1 ISR timeout, default is 200ms. This is maximum time allowed from START till STOP</span></div>
<div class="line"><span class="preprocessor">#define I2C1_TIMEOUT 200            //[-DEFAULT-]</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">//---- Enable I2C2 as a &quot;Serial Data Port&quot; ----</span></div>
<div class="line"><span class="comment">//#define NZ_I2C2_ENABLE</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//I2C2 Interrupt priority, a value from 0 to 7. 0 will disable interrupt, 7 is highest priority.</span></div>
<div class="line"><span class="preprocessor">#define    nzINT_PRIORITY_I2C2 4      //[-DEFAULT-]</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">//Transmit and Receive buffer sizes, for compatibility, ensure it is a power of 2 value! This can be bypassed</span></div>
<div class="line"><span class="comment">//by using a &quot;non power of 2&quot; CircularBuffer implementation for this project. See nz_CircularBuffer.h for details.</span></div>
<div class="line"><span class="preprocessor">#define    I2C2_RXBUF_SIZE  32      //[-DEFAULT-]</span></div>
<div class="line"><span class="preprocessor">#define    I2C2_TXBUF_SIZE  32      //[-DEFAULT-]</span></div>
</div><!-- fragment --><h2><a class="anchor" id="nz_seri2c_usage"></a>
Usage</h2>
<p>To use this module, the following must be done:</p>
<ul>
<li>Ensure a "Circular Buffer" has been added to the project, for details <a class="el" href="nz__circular_buffer_8h.html#nz_circularBuffer_usage">see Circular Buffer Usage</a>.</li>
<li>Copy the <a class="el" href="nz__ser_i2_c_8h.html#nz_seri2c_conf">Configuration</a> section above (from <a class="el" href="nz__ser_i2_c_8h.html" title="I2C Port 1 functions. ">nz_serI2C.h</a>) to the projdefs.h file.</li>
<li>In this "Configuration" section, enable required I2C ports. For example to enable I2C 1, ensure following is uncommented: <div class="fragment"><div class="line"><span class="preprocessor">#define NZ_I2C1_ENABLE</span></div>
</div><!-- fragment --></li>
<li>In this "Configuration" section, change any default values if required (if default values should be used, define is not required in projdefs.h).</li>
<li>Add nz_serI2C.c and nz_serDataPorts.c to the MPLAB project.</li>
<li>Include <a class="el" href="nz__ser_i2_c_8h.html" title="I2C Port 1 functions. ">nz_serI2C.h</a> in the c file it is used in.</li>
<li><b>All DONE!</b> The functions defined in this file can now be used in the project.</li>
</ul>
<h1><a class="anchor" id="nz_seri2c1_lic"></a>
Software License Agreement</h1>
<p>The software supplied herewith is owned by Modtronix Engineering, and is protected under applicable copyright laws. The software supplied herewith is intended and supplied to you, the Company customer, for use solely and exclusively on products manufactured by Modtronix Engineering. The code may be modified and can be used free of charge for commercial and non commercial applications. All rights are reserved. Any use in violation of the foregoing restrictions may subject the user to criminal sanctions under applicable laws, as well as to civil liability for the breach of the terms and conditions of this license.</p>
<p>THIS SOFTWARE IS PROVIDED IN AN 'AS IS' CONDITION. NO WARRANTIES, WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT, IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.</p>
<p>File History</p>
<p>2011-06-03, David H. (DH):</p>
<ul>
<li>Initial version </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_0497715779ca99cb1134d5ce544966ba.html">netcruzer</a></li><li class="navelem"><a class="el" href="dir_285a68def6f82363136d1caaa0fe0051.html">lib</a></li><li class="navelem"><a class="el" href="nz__ser_i2_c_8h.html">nz_serI2C.h</a></li>
    <li class="footer">Generated on Tue Dec 9 2014 15:08:19 for Netcruzer Library API by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
